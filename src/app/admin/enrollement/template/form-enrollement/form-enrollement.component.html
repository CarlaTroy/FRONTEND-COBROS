<div class="table-header">
    <div class="grid">
        <div class="col-12">
            <h3 class="mt-1"><b>{{modeForm}}</b></h3>
        </div>
    </div>
</div>

<p-toast></p-toast>








<div class="grid">
    <div class="col-12 md:col-12 lg:col-12">
        <p-button [label]="modelCourseFull ? 'Seleccionar Estudiante' : 'Select a Product'" icon="pi pi-search" (click)="op.toggle($event)"></p-button>

<p-overlayPanel #op [showCloseIcon]="true" [style]="{width: '600px'}">
    <ng-template pTemplate>
        <p-table [value]="modelCourseFull" selectionMode="single" [(selection)]="selectedCustomer" 
        (onRowSelect)="onRowSelect($event)" [paginator]="true" [rows]="5" responsiveLayout="scroll">
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="name">Name<p-sortIcon field="name"></p-sortIcon></th>
                    <th pSortableColumn="last_name">Apellido <p-sortIcon field="last_name"></p-sortIcon></th>
                    <th pSortableColumn="identification">Cédula <p-sortIcon field="identification"></p-sortIcon></th>
                    <th pSortableColumn="cell_phone">Celular <p-sortIcon field="cell_phone"></p-sortIcon></th>
                    <th pSortableColumn="address">Dirección <p-sortIcon field="address"></p-sortIcon></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-product>
                <tr [pSelectableRow]="rowData">
                    <td>{{product.name}}</td>
                    <td>{{product.last_name}}</td>
                    <td>{{product.identification}}</td>
                    <td>{{product.cell_phone}}</td>
                    <td>{{product.address}}</td>
                </tr>
            </ng-template>
        </p-table>
    </ng-template>
</p-overlayPanel>


<div *ngIf="selectedCustomer">

    <div class="col-12 md:col-12" >
        <div class="card p-fluid">
            <div class="grid">
                    <div class="col-6 md:col-6 lg:col-6">
                        <div class="field">
                            <label htmlFor="nombre"><b>Nombre</b></label>
                            <br>
                            <label htmlFor="nombre">{{selectedCustomer.name+' '+selectedCustomer.last_name}}</label>
                        </div>
                    </div>
                    <div class="col-6 md:col-6 lg:col-6">
                        <div class="field">
                            <label htmlFor="cedula"><b>Cédula</b></label>
                            <br>
                            <label htmlFor="cedula">{{selectedCustomer.identification}}</label>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>


    </div>
    <div class="col-12 md:col-12 lg:col-12 pt-0">
        <p-button  [label]="modelCohorteFull ? 'Seleccionar Cohorte' : 'Select a Cohorte'" icon="pi pi-search" (click)="opCohorte.toggle($event)"></p-button>

<p-overlayPanel #opCohorte [showCloseIcon]="true" [style]="{width: '600px'}">
    <ng-template pTemplate>
        <p-table [value]="modelCohorteFull" selectionMode="single" [(selection)]="selectedCohorte" 
        (onRowSelect)="onRowSelectCohorte($event)" [paginator]="true" [rows]="5" responsiveLayout="scroll">
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="name">Name<p-sortIcon field="name"></p-sortIcon></th>
                    <th pSortableColumn="date_init">date_init <p-sortIcon field="date_init"></p-sortIcon></th>
                    <th pSortableColumn="date_end">date_end <p-sortIcon field="date_end"></p-sortIcon></th>
                    <th pSortableColumn="cost_effective">cost_effective <p-sortIcon field="cost_effective"></p-sortIcon></th>
                    <th pSortableColumn="cost_credit">cost_credit <p-sortIcon field="cost_credit"></p-sortIcon></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-product>
                <tr [pSelectableRow]="rowData">
                    <td>{{product.name}}</td>
                    <td>{{product.date_init}}</td>
                    <td>{{product.date_end}}</td>
                    <td>{{product.cost_effective}}</td>
                    <td>{{product.cost_credit}}</td>
                </tr>
            </ng-template>
        </p-table>
    </ng-template>
</p-overlayPanel>


<div *ngIf="selectedCohorte">

    <div class="col-12 md:col-12" >
        <div class="card p-fluid">
            <div class="grid">
                    <div class="col-6 md:col-6 lg:col-6">
                        <div class="field">
                            <label htmlFor="name"><b>Nombre</b></label>
                            <br>
                            <label htmlFor="name">{{selectedCohorte.name}}</label>
                        </div>
                    </div>
            </div>


            <div class="grid">
                <div class="col-6 md:col-6 lg:col-6">
                    <div class="field">
                        <label htmlFor="name"><b>Fecha Inicio</b></label>
                        <br>
                        <label htmlFor="name">{{selectedCohorte.date_init}}</label>
                    </div>
                </div>

                <div class="col-6 md:col-6 lg:col-6">
                    <div class="field">
                        <label htmlFor="name"><b>Fecha Fin</b></label>
                        <br>
                        <label htmlFor="name">{{selectedCohorte.date_end}}</label>
                    </div>
                </div>
        </div>


        <div class="grid">
            <div class="col-6 md:col-6 lg:col-6">
                <div class="field">
                    <label htmlFor="name"><b>Costo en Efectivo</b></label>
                    <br>
                    <label htmlFor="name">{{selectedCohorte.cost_effective}}</label>
                </div>
            </div>

            <div class="col-6 md:col-6 lg:col-6">
                <div class="field">
                    <label htmlFor="name"><b>Costo en Crédito</b></label>
                    <br>
                    <label htmlFor="name">{{selectedCohorte.cost_credit}}</label>
                </div>
            </div>
    </div>

        </div>
    </div>
</div>


    </div>
</div>
















<form [formGroup]="formCohorte" (ngSubmit)="submitCohorte()">

	<div class="col-12">
		<div class="card">
			<div class="p-fluid p-formgrid grid">
               

				<div class="field col-6">
					<label htmlFor="student_id">
                        <span class="text-red-600">*</span>
                        Apellidos
                    </label>
					<input
                        pInputText
                        id="student_id"
                        [ngClass]="{'ng-invalid ng-dirty': lastNameNotValid}"
                        formControlName="student_id"
                        type="text" />
                    <span *ngIf="lastNameNotValid && formCohorte.get('student_id')?.errors?.['required']">
                        <p class="text-red-600">*Campo Requerido</p>
                    </span>
                    <div *ngIf="lastNameNotValid && formCohorte.get('student_id')?.errors?.['maxlength']">
                        <p class="text-red-600">*Debe tener como máximo 100 caracteres</p>
                    </div>
				</div>


                <div class="field col-6">
					<label htmlFor="cohorte_id">
                        <span class="text-red-600">*</span>
                        Nombres
                    </label>
					<input
                        pInputText
                        id="cohorte_id"
                        [ngClass]="{'ng-invalid ng-dirty': nameNotValid}"
                        formControlName="cohorte_id"
                        type="text" />
                    <span *ngIf="nameNotValid && formCohorte.get('cohorte_id')?.errors?.['required']">
                        <p class="text-red-600">*Campo Requerido</p>
                    </span>
                    <div *ngIf="nameNotValid && formCohorte.get('cohorte_id')?.errors?.['maxlength']">
                        <p class="text-red-600">*Debe tener como máximo 100 caracteres</p>
                    </div>
				</div>



				<div class="field col-12 md:col-6">
					<label htmlFor="tipe_pay_id">
                        <span class="text-red-600">*</span>
                        Cédula
                    </label>
					<input
                        pInputText
                        id="tipe_pay_id"
                        min="0"
                        [ngClass]="{'ng-invalid ng-dirty': identificationNotValid}"
                        formControlName="tipe_pay_id"
                        type="number" />
                        <span *ngIf="identificationNotValid && formCohorte.get('tipe_pay_id')?.errors?.['required']">
                            <p class="text-red-600">*Campo Requerido</p>
                        </span>
				</div>
                <div class="field col-12 md:col-6">
					<label htmlFor="cuotas">
                        <span class="text-red-600">*</span>
                        Celular
                    </label>
					<input
                        pInputText
                        min="0"
                        id="cuotas"
                        [ngClass]="{'ng-invalid ng-dirty': cellPhoneNotValid}"
                        formControlName="cuotas"
                        type="number" />
                        <span *ngIf="cellPhoneNotValid && formCohorte.get('cuotas')?.errors?.['required']">
                            <p class="text-red-600">*Campo Requerido</p>
                        </span>
				</div>

                <div class="field col-12 md:col-6">
					<label htmlFor="day_limite">
                        <span class="text-red-600">*</span>
                        Dirección
                    </label>
					<input
                        pInputText
                        min="0"
                        id="day_limite"
                        [ngClass]="{'ng-invalid ng-dirty': AddressNotValid}"
                        formControlName="day_limite"
                        type="text" />
                        <span *ngIf="AddressNotValid && formCohorte.get('day_limite')?.errors?.['required']">
                            <p class="text-red-600">*Campo Requerido</p>
                        </span>
				</div>
                

                <div class="field col-6">
                    <label htmlFor="course">Usuario</label>
                    <p-dropdown [options]="modelCourseFull" [(ngModel)]="courseNameSelected" formControlName="student_id" optionLabel="username" 
                [filter]="true" filterBy="name"
                (onChange)="onChange($event)"
                dataKey="value" [showClear]="true"
                [showClear]="true" placeholder="Seleccionar Usuario">
                <ng-template pTemplate="selectedItem">
                    <div class="country-item country-item-value" *ngIf="courseNameSelected">
                        <div>{{courseNameSelected}}</div>
                    </div>
                </ng-template>
                <ng-template let-cantones pTemplate="item">
                    <div class="country-item">
                        <div>{{cantones.name}}</div>
                    </div>
                </ng-template>
            </p-dropdown>
                   <!-- <input pInputText id="name1" type="text" formControlName="latitud"  />-->

                </div>
			</div>
		</div>
        <div class="grid flex flex-row-reverse ">
            <div class="grid">
                <div class="col">
                    <button type="button"
                    pButton icon="pi pi-times"
                    label="Cerrar" class="p-button-raised p-button-danger"
                    [routerLink]="['/admin/enrollement']"></button>
                </div>
                <div class="col">
                    <button type="Submit"   pButton icon="pi pi-check"label="Guardar" class="mr-2" ></button>
                </div>
            </div>
        </div>
	</div>
</form>
