<div class="table-header">
    <div class="grid">
        <div class="col-12">
            <h3 class="mt-1"><b>{{modeForm}}</b></h3>
        </div>
    </div>
</div>

<p-toast></p-toast>








<div class="grid">
    <div class="col-12 md:col-12 lg:col-12">
        <p-button [label]="modelStudentFull ? 'Seleccionar Estudiante' : 'Select a Product'" icon="pi pi-search" (click)="op.toggle($event)"></p-button>

<p-overlayPanel #op [showCloseIcon]="true" [style]="{width: '600px'}">
    <ng-template pTemplate>
        <p-table [value]="modelStudentFull" selectionMode="single" [(selection)]="selectedStudent" 
        (onRowSelect)="onRowSelect($event)" [paginator]="true" [rows]="5" responsiveLayout="scroll">
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="name">Name<p-sortIcon field="name"></p-sortIcon></th>
                    <th pSortableColumn="last_name">Apellido <p-sortIcon field="last_name"></p-sortIcon></th>
                    <th pSortableColumn="identification">Cédula <p-sortIcon field="identification"></p-sortIcon></th>
                    <th pSortableColumn="cell_phone">Celular <p-sortIcon field="cell_phone"></p-sortIcon></th>
                    <th pSortableColumn="address">Dirección <p-sortIcon field="address"></p-sortIcon></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-product>
                <tr [pSelectableRow]="rowData">
                    <td>{{product.name}}</td>
                    <td>{{product.last_name}}</td>
                    <td>{{product.identification}}</td>
                    <td>{{product.cell_phone}}</td>
                    <td>{{product.address}}</td>
                </tr>
            </ng-template>
        </p-table>
    </ng-template>
</p-overlayPanel>


<div *ngIf="selectedStudent">

    <div class="col-12 md:col-12" >
        <div class="card p-fluid">
            <div class="grid">
                    <div class="col-6 md:col-6 lg:col-6">
                        <div class="field">
                            <label htmlFor="nombre"><b>Nombre</b></label>
                            <br>
                            <label htmlFor="nombre">{{selectedStudent.name+' '+selectedStudent.last_name}}</label>
                        </div>
                    </div>
                    <div class="col-6 md:col-6 lg:col-6">
                        <div class="field">
                            <label htmlFor="cedula"><b>Cédula</b></label>
                            <br>
                            <label htmlFor="cedula">{{selectedStudent.identification}}</label>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>


    </div>
    <div class="col-12 md:col-12 lg:col-12 pt-0">
        <p-button  [label]="modelCohorteFull ? 'Seleccionar Cohorte' : 'Select a Cohorte'" icon="pi pi-search" (click)="opCohorte.toggle($event)"></p-button>

<p-overlayPanel #opCohorte [showCloseIcon]="true" [style]="{width: '600px'}">
    <ng-template pTemplate>
        <p-table [value]="modelCohorteFull" selectionMode="single" [(selection)]="selectedCohorte" 
        (onRowSelect)="onRowSelectCohorte($event)" [paginator]="true" [rows]="5" responsiveLayout="scroll">
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="name">Name<p-sortIcon field="name"></p-sortIcon></th>
                    <th pSortableColumn="date_init">date_init <p-sortIcon field="date_init"></p-sortIcon></th>
                    <th pSortableColumn="date_end">date_end <p-sortIcon field="date_end"></p-sortIcon></th>
                    <th pSortableColumn="cost_effective">cost_effective <p-sortIcon field="cost_effective"></p-sortIcon></th>
                    <th pSortableColumn="cost_credit">cost_credit <p-sortIcon field="cost_credit"></p-sortIcon></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-product>
                <tr [pSelectableRow]="rowData">
                    <td>{{product.name}}</td>
                    <td>{{product.date_init}}</td>
                    <td>{{product.date_end}}</td>
                    <td>{{product.cost_effective}}</td>
                    <td>{{product.cost_credit}}</td>
                </tr>
            </ng-template>
        </p-table>
    </ng-template>
</p-overlayPanel>


<div *ngIf="selectedCohorte">

    <div class="col-12 md:col-12" >
        <div class="card p-fluid">
            <div class="grid">
                    <div class="col-6 md:col-6 lg:col-6">
                        <div class="field">
                            <label htmlFor="name"><b>Nombre</b></label>
                            <br>
                            <label htmlFor="name">{{selectedCohorte.name}}</label>
                        </div>
                    </div>
            </div>


            <div class="grid">
                <div class="col-6 md:col-6 lg:col-6">
                    <div class="field">
                        <label htmlFor="name"><b>Fecha Inicio</b></label>
                        <br>
                        <label htmlFor="name">{{selectedCohorte.date_init}}</label>
                    </div>
                </div>

                <div class="col-6 md:col-6 lg:col-6">
                    <div class="field">
                        <label htmlFor="name"><b>Fecha Fin</b></label>
                        <br>
                        <label htmlFor="name">{{selectedCohorte.date_end}}</label>
                    </div>
                </div>
        </div>


        <div class="grid">
            <div class="col-6 md:col-6 lg:col-6">
                <div class="field">
                    <label htmlFor="name"><b>Costo en Efectivo</b></label>
                    <br>
                    <label htmlFor="name">{{selectedCohorte.cost_effective}}</label>
                </div>
            </div>

            <div class="col-6 md:col-6 lg:col-6">
                <div class="field">
                    <label htmlFor="name"><b>Costo en Crédito</b></label>
                    <br>
                    <label htmlFor="name">{{selectedCohorte.cost_credit}}</label>
                </div>
            </div>
    </div>

        </div>
    </div>
</div>


    </div>
</div>
















<form [formGroup]="formCohorte" (ngSubmit)="submitCohorte()">

	<div class="col-12">
		<div class="card">
			<div class="p-fluid p-formgrid grid">
               

                <div class="col-12 p-0">
                    <div class="field col-12 md:col-6">
                        <label htmlFor="canton">Tipo de Pago</label>
                        <p-dropdown id="name1" formControlName="tipe_pay_id" 
                        [options]='modelTypePaysFull' (onChange)="onChange($event)" dataKey="value" placeholder="Seleccionar Pago" 
                        optionLabel="name"  [showClear]="true"></p-dropdown>
                       <!-- <input pInputText id="name1" type="text" formControlName="latitud"  />-->
                       
        
                    </div>
                </div>
                

				<div class="field col-12 md:col-6">
					<label htmlFor="cash">
                        <span class="text-red-600">*</span>
                        Efectivo
                    </label>
					<input
                        pInputText
                        min="0"
                        id="cash"
                        [ngClass]="{'ng-invalid ng-dirty': cashNotValid}"
                        formControlName="cash"
                        type="text" />
                        <span *ngIf="cashNotValid && formCohorte.get('cash')?.errors?.['required']">
                            <p class="text-red-600">*Campo Requerido</p>
                        </span>
				</div>


                <div class="field col-12 md:col-6">
					<label htmlFor="day_limite">
                        <span class="text-red-600">*</span>
                        Día limite
                    </label>
					<input
                        pInputText
                        min="0"
                        id="day_limite"
                        [ngClass]="{'ng-invalid ng-dirty': DayLimitNotValid}"
                        formControlName="day_limite"
                        type="text" />
                        <span *ngIf="DayLimitNotValid && formCohorte.get('day_limite')?.errors?.['required']">
                            <p class="text-red-600">*Campo Requerido</p>
                        </span>
				</div>


                <div class="field col-12 md:col-6">
					<label htmlFor="cuotas">
                        <span class="text-red-600">*</span>
                        Cuotas
                    </label>
					<input 
                        pInputText
                        [disabled]="activateFieldCuotas"
                        id="cuotas"
                        min="0"
                        [ngClass]="{'ng-invalid ng-dirty': cuotasNotValid}"
                        formControlName="cuotas"
                        type="number" />
                        <span *ngIf="cuotasNotValid && formCohorte.get('cuotas')?.errors?.['required']">
                            <p class="text-red-600">*Campo Requerido</p>
                        </span>
				</div>

                <div class="field col-12 md:col-6">
					<label htmlFor="discount">
                        <span class="text-red-600">*</span>
                        Descuento
                    </label>
					<input
                        pInputText
                        min="0"
                        id="discount"
                        [ngClass]="{'ng-invalid ng-dirty': discountNotValid}"
                        formControlName="discount"
                        type="text" />
                        <span *ngIf="discountNotValid && formCohorte.get('discount')?.errors?.['required']">
                            <p class="text-red-600">*Campo Requerido</p>
                        </span>
				</div>



				
               

                
                

               




			</div>
		</div>
        <div class="grid flex flex-row-reverse ">
            <div class="grid">
                <div class="col">
                    <button type="button"
                    pButton icon="pi pi-times"
                    label="Cerrar" class="p-button-raised p-button-danger"
                    [routerLink]="['/admin/enrollement']"></button>
                </div>
                <div class="col">
                    <button type="Submit"   pButton icon="pi pi-check"label="Guardar" class="mr-2" ></button>
                </div>
            </div>
        </div>
	</div>
</form>
